# 微服务个人总结

## 这里基于个人的理解对微服务做的一些总结

基于 go-micro 微服务框架的工作实践整理的框架 [go-micro](https://github.com/w1991668899/go-micro)

## 微服务构成
 - 服务描述
 - 服务注册
 - 服务框架
 - 服务监控
 - 服务追中
 - 服务治理
 
## 服务描述

服务如何对外描述，调用某个服务需要提供哪些信息会返回哪些信息，常用方式如下：

 - restful api 
 - xml
 - idl（protobuf）
 
本人工作中使用的是go-micro内部使用grpc通信，所以使用的是protobuf来定义服务接口、参数、返回值等

## 服务注册

主要解决服务的发布与订阅，服务生产者将自己的服务发布到注册中心，服务消费者从注册中心
订阅服务

## 服务框架

- 采用不同的框架会使用不同的通信协议如grpc, tcp, udp等
- 数据传输采用什么方式, 同步还是异步，单连接还是多路复用
- 数据压缩格式如protobuf, json

# 服务监控

服务消费者与生产者启动后，需要对服务进行监控，随时了解服务运行状况，主要包括：

- 指标收集，如每次服务调用的耗时，是否成功等，将这些数据上传到数据处理中心
- 数据处理， 对日志数据进行统计
- 数据战术， 将处理的数据在可视化页面展示

# 服务追踪

记录服务间每一次调用的链路，以便进行追踪定位，一般我会在go的context中传入一个request_id, 推荐大家使用[opentracing](https://github.com/opentracing/opentracing-go)

# 服务治理

服务追踪定位到了问题，服务治理需要通过一系列手段对服务异常情况进行处理，常见情况如下：

- 单机故障，摘除故障节点
- 服务依赖不可用，服务A依赖于服务B，当服务B出现故障一段时间内停止对服务B发起调用。防止服务A被拖垮也给服务B减轻了压力使其尽快恢复








 
 